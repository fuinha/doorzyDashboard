(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{101:function(e,t,a){e.exports=a(193)},106:function(e,t,a){},191:function(e,t,a){e.exports=a.p+"static/media/logo_1.486401b5.png"},192:function(e,t,a){e.exports=a.p+"static/media/logo_alternate_plain.0ef8dae3.png"},193:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(15),o=a.n(r),l=(a(106),a(20)),s=a(21),u=a(26),i=a(25),m=a(27),d=(a(42),a(12)),h=a(13),p=Object(h.a)(),f=a(32),E=a(49),v=a(39),g=a.n(v),b=a(50),O=a(36),N=a(7),w=function(){function e(){Object(l.a)(this,e),this.uid=null,this.num_users=0}return Object(s.a)(e,[{key:"setUid",value:function(e){this.uid=e}},{key:"setNumUsers",value:function(e){this.num_users=e}}]),e}();Object(N.h)(w,{uid:N.m,num_users:N.m,setUid:N.d,setNumUsers:N.d});var y=new w,k=a(11),j=a.n(k);var S=function(e,t){return!!function(e,t){return""!==e&&""!==t&&!!/^\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/.test(e)&&!!/^(?=.*[0-9])(?=.*[!@#$%^&*])[a-zA-Z0-9!@#$%^&*]{6,16}$/.test(t)}&&(j.a.auth().signInWithEmailAndPassword(e,t).catch(function(e){return console.log(e)}),!0)},C=a(5),x=a(14),T=(a(92),a(93),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(i.a)(t).call(this,e))).handleLogout=function(){j.a.auth().signOut().then(function(){y.setUid(null)}).catch(function(e){return console.log(e)})},a.getExpoToken=function(){j.a.firestore().collection("users").get().then(function(e){var t=[];return e.forEach(function(e){console.log(e.data().fname+" "+e.data().lname+" "+e.data().pushToken),t.push(e.data().pushToken)}),t}).catch(function(e){return console.log(e),e})},a.handleChange=function(e){var t=a.state.selectValue;t.includes(e.target.value)?a.setState({selectValue:t.filter(function(t){return t!==e.target.value})}):(t.push(e.target.value),a.setState({selectValue:t})),console.log(a.state.selectValue)},a.handleText=function(e){a.setState(Object(O.a)({},e.target.name,e.target.value),function(){return console.log(a.state.title)})},a.postData=function(){var e=Object(b.a)(g.a.mark(function e(t,a){var n;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{method:"POST",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json"},referrer:"no-referrer",body:JSON.stringify(a)});case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.selectAll=function(){for(var e=[],t=a.state.users,n=0;n<t.length;n++)e.push(t[n].pushToken);a.setState({selectValue:e}),console.log(a.state.selectValue)},a.handleSubmit=function(){var e={tokens:a.state.selectValue,title:a.state.title,content:a.state.content};a.postData("https://powerful-wave-93367.herokuapp.com/selectedUsers",e)&&(console.log("SUCCESSFULLY SENT NOTIFICATIONS"),a.setState({alert:!0}))},a.state={users:[],selectedUsers:[],title:"",content:"",selectValue:[],collapseOpen:!1,alert:!1},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"toggleNavbar",value:function(){this.setState(Object(E.a)({},this.state,{collapseOpen:!this.state.collapseOpen}))}},{key:"componentDidMount",value:function(){var e=j.a.firestore().collection("users"),t=this;e.get().then(function(e){var a=[];e.forEach(function(e){a.push(e.data())}),t.setState({users:a})}).catch(function(e){return console.log(e)})}},{key:"render",value:function(){var e=this,t=this.state.users.map(function(e,t){return c.a.createElement("option",{value:e.pushToken,key:t},e.fname," ",e.lname)});if(this.state.alert)c.a.createElement(C.a,{theme:"success"},"Push Notifications successfully sent.");else alert=null;return c.a.createElement(C.h,{className:"body-container"},c.a.createElement(C.k,{type:"dark",className:"body-container",expand:"md"},c.a.createElement(C.l,{href:"#"},"doorzy"),c.a.createElement(C.m,{onClick:this.toggleNavbar}),c.a.createElement(C.g,{open:this.state.collapseOpen,navbar:!0},c.a.createElement(C.i,{navbar:!0},c.a.createElement(C.j,null,c.a.createElement(x.b,{className:"nav-item",to:"/app/overview"},"Push Notifications")),c.a.createElement(C.j,null,c.a.createElement(x.b,{className:"nav-item",to:"/app/dashboard"},"Overview"))),c.a.createElement(C.i,{navbar:!0,className:"ml-auto"},c.a.createElement(C.b,{pill:!0,theme:"danger",onClick:function(){e.handleLogout()}},"Sign Out")))),c.a.createElement(C.h,{className:"padding-vertical"},c.a.createElement(C.c,{className:"dark-card"},c.a.createElement(C.d,null,c.a.createElement(C.o,null,c.a.createElement(C.f,null,c.a.createElement(C.o,null,c.a.createElement(C.f,null,c.a.createElement("h6",{className:"orange-font"},"Select users :"),c.a.createElement("select",{className:"dark-input",multiple:!0,value:this.state.selectValue,onChange:function(t){e.handleChange(t)}},t))),c.a.createElement(C.o,null,c.a.createElement(C.f,null,c.a.createElement(C.b,{outline:!0,block:!0,squared:!0,theme:"light",onClick:function(){e.selectAll()}},"Select all users")))),c.a.createElement(C.f,null,c.a.createElement(C.o,null,c.a.createElement(C.f,null,c.a.createElement("h6",{className:"orange-font"},"Enter title :"),c.a.createElement("input",{type:"text",name:"title",className:"dark-input",value:this.state.title,onChange:function(t){return e.handleText(t)}}),c.a.createElement("h6",{className:"orange-font"},"Enter content :"),c.a.createElement("input",{type:"text",name:"content",className:"dark-input",value:this.state.content,onChange:function(t){return e.handleText(t)}}))),c.a.createElement(C.o,null,c.a.createElement(C.f,null,c.a.createElement(C.b,{squared:!0,block:!0,theme:"success",onClick:function(){e.handleSubmit()}},"Send")))))))))}}]),t}(c.a.Component)),U=Object(d.a)(T),L=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(i.a)(t).call(this,e))).toggleNavbar=function(){a.setState(Object(E.a)({},a.state,{collapseOpen:!a.state.collapseOpen}))},a.toggleTooltip=function(){a.setState({tooltipOpen:!a.state.tooltipOpen})},a.handleLogout=function(){j.a.auth().signOut().then(function(){y.setUid(null)}).catch(function(e){return console.log(e)})},a.handleChange=function(e){var t=a.state.selectValue;t.includes(e.target.value)?a.setState({selectValue:t.filter(function(t){return t!==e.target.value})}):(t.push(e.target.value),a.setState({selectValue:t})),console.log(a.state.selectValue)},a.handleText=function(e){a.setState(Object(O.a)({},e.target.name,e.target.value),function(){return console.log(a.state.title)})},a.postData=function(){var e=Object(b.a)(g.a.mark(function e(t,a){var n;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{method:"POST",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json"},referrer:"no-referrer",body:JSON.stringify(a)});case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.state={collapseOpen:!1,succOrderCount:0,unsuccOrderCount:0,userCount:0,tooltipOpen:!1},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=j.a.firestore().collection("counters").doc("user_count"),t=j.a.firestore().collection("counters").doc("succ_order_count"),a=j.a.firestore().collection("counters").doc("unsucc_order_count"),n=this;e.onSnapshot(function(e){n.setState({userCount:e.data().count})}),t.onSnapshot(function(e){n.setState({succOrderCount:e.data().count})}),a.onSnapshot(function(e){n.setState({unsuccOrderCount:e.data().count})})}},{key:"render",value:function(){var e=this;return c.a.createElement(C.h,{className:"body-container"},c.a.createElement(C.k,{type:"dark",className:"body-container",expand:"md"},c.a.createElement(C.l,{href:"#"},"doorzy"),c.a.createElement(C.m,{onClick:function(){return e.toggleNavbar()}}),c.a.createElement(C.g,{open:this.state.collapseOpen,navbar:!0},c.a.createElement(C.i,{navbar:!0},c.a.createElement(C.j,null,c.a.createElement(x.b,{className:"nav-item",to:"/app/overview"},"Push Notifications")),c.a.createElement(C.j,null,c.a.createElement(x.b,{className:"nav-item",to:"/app/dashboard"},"Overview"))),c.a.createElement(C.i,{navbar:!0,className:"ml-auto"},c.a.createElement(C.b,{pill:!0,theme:"danger",onClick:function(){e.handleLogout()}},"Sign Out")))),c.a.createElement(C.h,null,c.a.createElement(C.o,null,c.a.createElement(C.f,null,c.a.createElement(C.c,{className:"dark-card"},c.a.createElement(C.d,{className:"center-div"},c.a.createElement(C.e,{className:"counter-title"},"USERS"),c.a.createElement("p",{className:"large-count"},this.state.userCount)))),c.a.createElement(C.f,null,c.a.createElement(C.c,{className:"dark-card"},c.a.createElement(C.d,{className:"center-div"},c.a.createElement(C.e,{className:"counter-title"},"ORDERS"),c.a.createElement("p",{className:"large-count",id:"orderTooltip"},this.state.succOrderCount+this.state.unsuccOrderCount),c.a.createElement(C.p,{open:this.state.tooltipOpen,target:"#orderTooltip",toggle:function(){e.toggleTooltip()}},"Delivered - ",this.state.succOrderCount,"  Cancelled - ",this.state.unsuccOrderCount))))),c.a.createElement(C.o,null,c.a.createElement(C.f,null,c.a.createElement(C.c,{className:"dark-card"},c.a.createElement(C.d,{className:"center-div"},c.a.createElement(C.e,{className:"counter-title"},"Target - 500 USERS"),c.a.createElement(C.n,{theme:"success",value:this.state.userCount,max:500})))),c.a.createElement(C.f,null,c.a.createElement(C.c,{className:"dark-card"},c.a.createElement(C.d,{className:"center-div"},c.a.createElement(C.e,{className:"counter-title"},"Target - 1000 ORDERS"),c.a.createElement(C.n,{theme:"success",value:this.state.unsuccOrderCount+this.state.succOrderCount,max:1e3})))))))}}]),t}(c.a.Component),A=Object(d.a)(L),D=function(){return c.a.createElement("div",{className:"container-fluid bg-primary full-view"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col col-md-6 col-sm-12 offset-md-3 nomatch-wrapper"},c.a.createElement("img",{src:a(191),alt:"No-Match",className:"logo-nomatch"}),c.a.createElement("div",{className:"border-left border-white"},c.a.createElement("h3",{className:"text-white"},"Error 404"),c.a.createElement("p",{className:"text-white"},"The requested URL does not exist on this server."),c.a.createElement("p",{className:"text-white"},"That's all we know")),c.a.createElement(x.b,{to:"/app"},c.a.createElement("button",{className:"btn btn-success"},"Home")))))},V=Object(d.a)(function(e,t){var a=e.match,n=y.uid;return c.a.createElement(f.d,null,c.a.createElement(f.b,{exact:!0,path:"".concat(a.path),render:function(){return n?c.a.createElement(f.a,{to:"".concat(a.path,"/dashboard")}):c.a.createElement(f.a,{to:"/auth"})}}),c.a.createElement(f.b,{path:"".concat(a.path,"/overview"),render:function(){return n?c.a.createElement(U,null):c.a.createElement(f.a,{to:"/auth"})}}),c.a.createElement(f.b,{path:"".concat(a.path,"/dashboard"),render:function(){return n?c.a.createElement(A,null):c.a.createElement(f.a,{to:"/auth"})}}),c.a.createElement(f.b,{component:D}))}),z=a(48),I=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(i.a)(t).call(this,e))).handleLogin=function(){S(a.state.username,a.state.password)?console.log("LOGGED IN"):console.log("Unable to login")},a.state={username:"",password:"",error:""},a.handleLogin=a.handleLogin.bind(Object(z.a)(a)),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"col-md-4 offset-md-4 col-sm-12 border my-5 pb-5 pt-3 rounded"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-md-6 offset-md-3 col-sm-12"},c.a.createElement("img",{src:a(192),className:"logo-full",alt:"Virestore Logo"}))),c.a.createElement("div",{className:"row p-2 mb-2"},c.a.createElement("div",{className:"col-md-12 col-sm-12"},c.a.createElement("h4",{className:"text-center"},"Sign In"),c.a.createElement("p",{className:"text-center text-secondary"},"Continue to your doorzy admin account"))),c.a.createElement("div",{className:"row p-2"},c.a.createElement("div",{className:"col-sm-12 col-md-8 offset-md-2 px-2"},c.a.createElement("input",{type:"email",value:this.state.username,className:"login-form",placeholder:"Email",onChange:function(t){e.setState({username:t.target.value})}}))),c.a.createElement("div",{className:"row p-2"},c.a.createElement("div",{className:"col-sm-12 col-md-8 offset-md-2 px-2"},c.a.createElement("input",{type:"password",className:"login-form",placeholder:"Password",value:this.state.password,onChange:function(t){e.setState({password:t.target.value})}}))),c.a.createElement("div",{className:"row p-2 mt-3"},c.a.createElement("div",{className:"col-sm-12 col-md-8 offset-md-2 px-2"},c.a.createElement("button",{type:"button",className:"button-primary bg-success btn-block",onClick:function(){e.handleLogin()}},"Login"))),c.a.createElement("div",{className:"row p-2 fixed-bottom"},c.a.createElement("div",{className:"col-sm-12 col-md-8 offset-md-2 px-2"},c.a.createElement("p",{className:"text-secondary text-center"},"\xa9 Copyright 2019. Doorzy Inc.")))))}}]),t}(c.a.Component),R=Object(d.a)(I),_=Object(d.a)(function(e,t){var a=e.match,n=y.uid;return c.a.createElement(f.d,null,c.a.createElement(f.b,{exact:!0,path:"".concat(a.path),render:function(){return n?c.a.createElement(f.a,{to:"/app"}):c.a.createElement(f.a,{to:"".concat(a.path,"/login")})}}),c.a.createElement(f.b,{path:"".concat(a.path,"/login"),render:function(){return n?c.a.createElement(f.a,{to:"/app"}):c.a.createElement(R,null)}}),c.a.createElement(f.b,{component:D}))}),P=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return c.a.createElement(f.d,null,c.a.createElement(f.b,{exact:!0,path:"/",render:function(){return c.a.createElement(f.a,{to:"/app"})}}),c.a.createElement(f.b,{path:"/auth",component:_}),c.a.createElement(f.b,{path:"/app",component:V}),c.a.createElement(f.b,{component:D}))}}]),t}(c.a.Component),W=Object(d.a)(P),M={apiKey:"AIzaSyBiEZ2XykTMZm4KmAtu5xMzdqHo-UsXRXA",authDomain:"doorzy-dev.firebaseapp.com",databaseURL:"https://doorzy-dev.firebaseio.com",projectId:"doorzy-dev",storageBucket:"",messagingSenderId:"797207289513",appId:"1:797207289513:web:21bad304cc904949"};j.a.initializeApp(M);var $=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(e){j.a.auth().onAuthStateChanged(function(e){if(e){var t=e.uid;y.setUid(t),p.push("/app")}else y.setUid(null),p.push("/auth")})}},{key:"render",value:function(){return c.a.createElement(W,null)}}]),t}(c.a.Component),q=Object(d.a)($),B=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function J(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}o.a.render(c.a.createElement(x.a,null,c.a.createElement(q,{mainStore:y})),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/doorzyDashboard",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/doorzyDashboard","/service-worker.js");B?(function(e,t){fetch(e).then(function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):J(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):J(t,e)})}}()},42:function(e,t,a){},93:function(e,t,a){}},[[101,1,2]]]);
//# sourceMappingURL=main.2e4a9317.chunk.js.map